# Установка компонентов через Докер

Периодически сложные компоненты (STT/TTS) не работают. 
Рассмотрим как их установить максимально просто через Докер и интегрировать с Ириной.

Предположим, [вы уже отладили установку](/docs/INSTALL_DEBUG.md) и знаете, что у вас 
не работает (STT/TTS) и т.д.

## STT через Докер - если не работает VOSK

Можно установить распознавание голоса с микрофона через Докер 
(**важно:** у меня подтормаживало, так что по возможности все-таки настройте локально)

- Запустите `docker run -d -p 2700:2700 alphacep/kaldi-ru:latest` 
(детали: https://alphacephei.com/vosk/server )

- Запустите `runva_voskrem.py`. Он будет читать данные с микрофона и отправлять на сервер 
для распознавания.

В случае, если надо запустить распознавание на другой машине -
используйте параметр -u (--uri): `runva_voskrem.py -u=ws://100.100.100.100:2700` 
для уточения адреса сервера.

## TTS через Докер

**plugin_tts_rhvoice_rest.py** - (оффлайн) TTS через RHVoice.
Использует докер-сервер https://github.com/Aculeasis/rhvoice-rest для
генерации голоса. Зайдите туда и запустите нужный вам докер.

Голос и адрес докера задается в конфиге `options/plugin_tts_rhvoice_rest.json`.

_(По неизвестным причинам плохо генерирует WAV. 
Поэтому используется генерация MP3. Учтите, если будете использовать)_

Установка:
- запустите Ирину хотя бы раз
- установите в options/core.json `"ttsEngineId": "rhvoice_rest"`

**plugin_tts_silero_rest.py** - (оффлайн, при первом запуске загружается модель озвучки из интернета) TTS через Silero v3.
Использует докер-сервер https://github.com/janvarev/silero_rest_service для
генерации голоса. Зайдите туда и запустите докер. По желанию можно сменить модель silero (например, для другого языка).

Голос и адрес докера задается в конфиге `options/plugin_tts_silero_rest.json`.

Установка:
- запустите Ирину хотя бы раз
- установите в options/core.json `"ttsEngineId": "silero_v3"`
